<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TUI Academy - Welcome</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
</head>
<body>
    <div class="page-container">
        <div class="container">
            <div class="card fade-in">
                <div class="text-center mb-4">
                    <div class="logo">
                        <h1>TUI Academy</h1>
                    </div>
                    <p class="subtitle">Master the skies with interactive aviation training</p>
                </div>
                
                <div class="grid grid-2">
                    <div class="hero-section">
                        <h2>Welcome to TUI Academy</h2>
                        <p>Join thousands of aviation professionals learning through our interactive modules. Access comprehensive training materials, track your progress, and earn certifications.</p>
                        
                        <div class="features">
                            <div class="feature">
                                <div class="feature-icon">üìö</div>
                                <div>
                                    <h4>Interactive Theory</h4>
                                    <p>Rich, multimedia content with detailed explanations</p>
                                </div>
                            </div>
                            <div class="feature">
                                <div class="feature-icon">üéØ</div>
                                <div>
                                    <h4>Progress Tracking</h4>
                                    <p>Monitor your learning journey with detailed analytics</p>
                                </div>
                            </div>
                            <div class="feature">
                                <div class="feature-icon">üèÜ</div>
                                <div>
                                    <h4>Certification</h4>
                                    <p>Earn recognized certificates upon completion</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="login-section">
                        <div class="login-card">
                            <h3>Get Started</h3>
                            <p>Sign in with your Discord account to access your personalized learning experience.</p>
                            
                            <button id="discordLogin" class="btn btn-primary w-100">
                                <img src="https://assets-global.website-files.com/6257adef93867e50d84d30e2/636e0a6a49cf1274a259aaad_discord-mark-white.svg" alt="Discord" width="20" height="20">
                                Login with Discord
                            </button>
                            
                            <p class="login-note">Secure authentication powered by Discord</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDQ7SI1Wi5TuXyTINtVUMQ25xXLZaxuocM",
            authDomain: "tui-academy.firebaseapp.com",
            projectId: "tui-academy",
            storageBucket: "tui-academy.firebasestorage.app",
            messagingSenderId: "1063284122485",
            appId: "1:1063284122485:web:33a49d0a1a8e06e478693c",
            measurementId: "G-P92R39V4SB"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Discord OAuth configuration
        const DISCORD_CLIENT_ID = '1094741743372611744';
        const REDIRECT_URI = 'https://progamerzzzz8447.github.io/tuiacademy/';
        const DISCORD_SCOPES = 'identify email';

        // Check if user is returning from OAuth
        const urlParams = new URLSearchParams(window.location.search);
        const userId = urlParams.get('id');

        if (userId) {
            // User is returning from OAuth, redirect to modules
            window.location.href = `modules.html?id=${userId}`;
        }

        // Discord login handler
        document.getElementById('discordLogin').addEventListener('click', () => {
            const discordAuthUrl = `https://discord.com/api/oauth2/authorize?client_id=${DISCORD_CLIENT_ID}&redirect_uri=${encodeURIComponent(REDIRECT_URI)}&response_type=code&scope=${encodeURIComponent(DISCORD_SCOPES)}`;
            window.location.href = discordAuthUrl;
        });

        // Add loading animation
        document.addEventListener('DOMContentLoaded', () => {
            const loginBtn = document.getElementById('discordLogin');
            loginBtn.addEventListener('click', () => {
                loginBtn.classList.add('loading');
                loginBtn.innerHTML = '<div class="spinner"></div> Connecting...';
            });
        });
    </script>
</body>
</html>
